# 如何录制网页视频中的音频
-----------------------------------------

最近在迷恋《猎场》，更是喜欢里面的插曲《一场恋爱》，然后去了正规渠道网易云音乐、酷狗、QQ音乐等应用去搜索，结果由于版权全部收费。有钱的可以看成是商业问题会去购买正版，搞技术的只会解决技术问题。方法很多，比如：破解应用进行下载(虽然违法但技术上应该是可行的)、用钱购买（合法正规）、录制等。我用的方法是录制，不是简单的用录音机进行录制（外界噪声很多），但是原理一样。

#### 一、基本思路

1. 通过iOS9提供的ReplayKit框架进行iPhone的屏幕录制（包括声音和图像）

2. 通过AirDrop将视频导出到mac中

3. 通过ffmpeg提取视频中的声音部分（根据编码方式可以封装成不同格式，比如：m4a、mp3等）

#### 二、基本步骤

1. 制作APP使用UIWebView加载网页（带视频的网页），并使用Replaykit进行屏幕录制，注意录制的开始和结束时间点

2. 录屏结束后，通过AirDrop将视频导出到mac中

3. 安装ffmpeg库，brew install ffmpeg

4. 如果导出mp3需要安装lame编码库，brew install lame，并在配置ffmpeg中配置好lame

5. 使用命令导出mp3: ffmpeg -i apple.mp4 -f mp3 -vn apple.mp3

6. 使用命令导出m4a: ffmpeg -i apple.mp4 -acodec copy -vn apple.m4a

7. 还可以使用ffmpeg命令来编辑导出来的声音文件

7. ok，自己随便使用声音文件了（ps: 尽量不要给自己找麻烦）

#### 三、话语

1. 组合和联想，来突破一些限制（hacking）
2. 上次记得是录制视频，这次是操作音频，其实按照上面的思路是可以实时录制音频的（对于我就目前这个程度就OK了）
3. 你还可以想一些其他东西，比如通过网页视频来录制MV，其实就是指定区域的录制
4. 没事多试试ffmpeg

---------------------------------------------

[DOWNLOAD](documents/TestAudioReplay.zip)

