
# 如何编写更加通用的软件

> *作者：Arvin 日期：2019年07月01日*

---------------------------------

>BEGIN

今年伊始，一直在做C++三维渲染方面的工作。最近偶尔遇到了irrlitch（鬼火）引擎。这款3D渲染引擎比较精简适合个人研究，但不太适合用于产品环境，而且比较老旧没有适配最新的3d图形API（Vulkan、metal和DX12）。但是它的代码写的是真的好，个人很有兴趣去学习和研究，或者修改。本篇主要着眼于如何编写比较通用的跨平台的软件（框架）的方法。

### 一、思考
---------------------------------

软件适配平台主要存在2个方面，一个是平台相关的数据类型，其次是平台相关的api。具体来讲，主要是编译器和SDK的不同。编程语言的差异相对来讲比较小。

跨平台性是程序通用性的重要方面，其次是编程语言方面，最后是架构可扩展、模块可配置和算法的通用性。通用性好的程序应该在这些方面达到一个较好的水平。

程序通用性的思路大概是：程序中从平台的数据类型和API两个方面屏蔽平台的差异性。在C/C++中（后面使用C++进行分析），可以使用宏定义来配置和屏蔽平台的特性。

### 二、技巧
---------------------------------

为什么使用C++呢？C++有几个非常重要的语言特性：支持类、有模版、可重载函数运算符和命名空间。类可以说是对操作api的抽象，模版是对数据类型的抽象，可重载函数提供了一组类似函数的抽象，命名空间提供了程序功能模块化的基础。并且，C++的这些抽象在使用正确的情况下并大幅降低程序的性能。因为C++提供了这些抽象性，使得程序的通用性比较强。




>END

[代码下载](documents/OBShapedButton.zip)

