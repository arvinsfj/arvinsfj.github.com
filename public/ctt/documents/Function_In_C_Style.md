# C语言函数风格

>*作者：Arvin 日期：2016年8月28日*

-----------------------------------

>BEGIN

C语言文件，从上至下依次是：导入头文件宏、自定义宏、数据定义、函数原型说明、自定义函数、主函数。

这里主要说明自定义函数的写法和风格。（使用REPL模式说明）

### 一、函数接口（原型）定义（Function Interface）
--------------------------------------------------
    定义如下：
    
    `Return Type` `Function Name`(`Parameter List`)
    
    `返回值类型` `函数名称`(`参数列表`)
    
    注：函数输出和函数输入不讨论函数指针和全局变量。采用字符小写，名称下划线分割，类型打包，参数逗号空格分割写法

> **返回值类型（函数输出）**

代表函数对外部环境的影响。

* 无返回值（void类型）：代表函数体操作100%正确或操作不影响外部环境。一般不带函数输入、带输入但不修改原始值、带输入但对输入的修改100%正确。（函数输入：函数参数列表、全局变量）（实际编码中尽量不要使用全局变量）

* 状态型返回值（整型）：代表函数体操作结果具有2种或2种以上状态，操作具有不确定性。比如，IO操作、内存分配、进程操作等。输入一般带IO文件描述符。正确返回数量或描述符、错误返回状态或NULL。

* 结果型返回值：代表函数体操作具有确定的结果。比如，数学数值转换。输入一般是基本数值类型。

* 指针型返回值：代表函数体需要返回多个数据或字符串，一般返回结构体或字符串（一般不会返回函数指针）。输入不确定，但函数体一般是字符串操作或结构体操作。

> **函数名称（函数运算抽象）**

代表函数功能名称和函数指针。需要先定义后调用。其中递归函数比较特殊，在定义中调用自身。

> **参数列表（函数输入）**

代表外部环境的输入，分为基本数值型输入和块数据输入。

* 无输入（void类型）：代表函数体操作不依赖外部环境。（一般不使用全局变量）

* 基本数值型输入（整型和实型）：代表数学操作或IO操作。一般操作比较简单。不修改外部环境。

* 块数据输入（指针型）：代表数组、字符串或结构体操作。其中数组输入需要传递数组指针和数组大小。会修改外部环境。（一般不会传入函数指针）

* 混合数据输入（指针型和整型）：代表数组、字符串或结构体操作。

*函数输入、函数输出类型没有硬性的规定，可以是基本数值类型、数组、结构体和指针类型，函数名称代表函数的唯一入口指针变量。函数名称、函数参数列表、函数局部变量在调用的时候全部回进入调用栈*

### 二、函数体定义（Function）
--------------------------------------------------
    定义如下：

    Function Interface`{` `local parameter list`; `statement list`; `return value`; `}` 
    
    函数接口原型`{` `函数局部变量定义列表`; `函数功能语句定义列表`; `函数返回语句（可选）`; `}` 

    注：函数体紧跟在函数原型后面。不讨论全局变量和函数指针。`{`和`}`采用独占一行的写法。

> **局部变量定义列表**

* 代表函数内部环境，跟函数参数列表共同组成函数的运算环境（一般不会使用全局变量）。在函数调用的时候存储在调用栈中。

* 可以使用任何类型定义局部变量，一般使用基本数值类型、数组、结构体和指针。

* 局部变量定义采用类型归并，异类独占一行的写法。初始化数值可选。

> **功能语句定义列表**

* 代表函数数据操作方法，由循环、条件、赋值等语句组成，操作的对象是函数的环境（函数参数、局部变量、全局变量）。

* 循环代表有限次数的重复操作，尾递归的替代方法。是对量变的抽象。

* 条件代表有限操作的分类，操作的分类。是对质变的抽象。不同事物对应不同操作。

* 赋值代表变量状态的改变，是事物质变的途径。状态的数值改变方法只有数学运算。状态的判断由关系运算和逻辑运算构成。逻辑运算组合关系运算。

* 程序的运行由变量状态驱动。状态的改变一般具有方向性和有限性。

* 其中，语句由语句结构（关键字）、条件表达式、执行语句组成。采用递归描述。

* 递归和组合，是程序的根本结构和思想。递归代表类似结构的嵌套、分层、深度；组合代表不同结构的聚合、分类、广度。

* 语句从运算环境中获取状态数值，并驱动程序的执行。

* 功能语句定义采用语句紧凑，表达式松散、功能块独占一行的写法。

### 三、结束语
--------------------------------------------------
    功能由有限的状态和状态改变构成，状态构成运算环境，状态改变构成运算自身，环境驱动运算。
    
    状态代表不同事物，状态改变代表事物的发展过程，量变引起质变。
    
    状态构成事物的本质属性，具有边界，外因（外部状态）能引起内部状态的改变，事物的发展过程是状态的量变到质变的过程并且具有方向性。
    
    具体到编程，变量代表状态，操作代表状态改变方法，演算就是变量和操作的相互作用并得到最终状态。

    编程的过程就是事物发展过程的规划。

    在设计算法的时候，不要产生例外情况。循环和条件分开，不要嵌套，保持过程清晰。递归优于循环。减少无效操作。使用最优运算符。

    局部变量定义跟语句定义分开。语句中不要进行变量定义。使用好的数据定义减小算法的复杂性。

    模块化功能单元，使用简单的接口来连接各个功能单元。模块间通信采用字符流，定义简单的通信格式来减小功能模块的复杂性。

    系统尽量采用分层结构，功能自下而上由简到繁。
    
    
>END